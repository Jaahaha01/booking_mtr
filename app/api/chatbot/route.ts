import { NextRequest, NextResponse } from "next/server";
import { db } from "@/lib/db";

export const dynamic = 'force-dynamic';

function matchAny(msg: string, keywords: string[]): boolean {
	return keywords.some(k => msg.includes(k));
}

export async function POST(req: NextRequest) {
	try {
		const { message } = await req.json();
		const lc = message.toLowerCase().trim();
		if (matchAny(lc, ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ', '‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö', '‡∏î‡∏µ‡∏Ñ‡πà‡∏∞', 'hello', 'hi', 'hey', '‡∏Æ‡∏±‡∏•‡πÇ‡∏´‡∏•'])) {
			return NextResponse.json({
				reply: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! üëã ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°\n\n‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡∏ö?\n‚Ä¢ ‡∏ñ‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á\n‚Ä¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô\n‚Ä¢ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á\n‚Ä¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á'
			});
		}

		if (matchAny(lc, ['‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ', '‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£', '‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ä‡πà‡∏ß‡∏¢', '‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á', '‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£'])) {
			return NextResponse.json({
				reply: '‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòä\n\n‚Ä¢ üè¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á/‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á\n‚Ä¢ üë• ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô\n‚Ä¢ üìã ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á\n‚Ä¢ üìä ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞/‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á\n‚Ä¢ ‚ùå ‡∏ß‡∏¥‡∏ò‡∏µ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á\n‚Ä¢ ‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£/‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á\n‚Ä¢ üñ•Ô∏è ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á\n‚Ä¢ ‚≠ê ‡∏™‡πà‡∏á Feedback/‡∏£‡∏µ‡∏ß‡∏¥‡∏ß\n\n‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!'
			});
		}
		if (matchAny(lc, ['‡∏ß‡πà‡∏≤‡∏á', 'available', '‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ', '‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡πâ‡∏≠‡∏á', '‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á', '‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á', '‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á', '‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á', '‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á'])) {
			const rooms = await db`SELECT * FROM rooms`;
			const activeRooms = rooms.filter((r: any) => r.status === 'active' || r.is_active === true || r.is_active === 1);

			const busy = await db`
				SELECT DISTINCT room_id FROM bookings 
				WHERE status = 'confirmed' 
				AND NOW() BETWEEN start AND "end"
			`;
			const busyIds = new Set(busy.map((b: any) => b.room_id));

			const availableRooms = activeRooms.filter((r: any) => !busyIds.has(r.room_id));
			const busyRooms = activeRooms.filter((r: any) => busyIds.has(r.room_id));

			if (availableRooms.length > 0) {
				let reply = `üü¢ ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á <b>${availableRooms.length}</b> ‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö:\n\n`;
				reply += availableRooms.map((r: any) => `‚Ä¢ <b>${r.name}</b> (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö ${r.capacity} ‡∏Ñ‡∏ô)`).join('\n');
				if (busyRooms.length > 0) {
					reply += `\n\nüî¥ ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô: ${busyRooms.map((r: any) => r.name).join(', ')}`;
				}
				reply += '\n\nüí° ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π "‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö';
				return NextResponse.json({ reply });
			} else {
				return NextResponse.json({
					reply: 'üî¥ ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö\n\nüí° ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π "‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö'
				});
			}
		}
		const capacityMatch = lc.match(/(\d+)\s*‡∏Ñ‡∏ô/);
		if (capacityMatch && matchAny(lc, ['‡∏Ñ‡∏ô', '‡πÄ‡∏´‡∏°‡∏≤‡∏∞', '‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö', '‡∏à‡∏∏', '‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°', '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥', '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£', '‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ', '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö', '‡∏´‡πâ‡∏≠‡∏á'])) {
			const requiredCapacity = parseInt(capacityMatch[1]);
			const rooms = await db`SELECT * FROM rooms`;

			const matchingRooms = rooms.filter((r: any) => {
				const isActive = r.status === 'active' || r.is_active === true || r.is_active === 1;
				if (!isActive) return false;
				let cap = 0;
				if (typeof r.capacity === 'number') {
					cap = r.capacity;
				} else if (typeof r.capacity === 'string') {
					const match = r.capacity.match(/(\d+)/);
					cap = match ? parseInt(match[1]) : 0;
				}
				return cap >= requiredCapacity;
			}).sort((a: any, b: any) => {
				const getCap = (r: any) => typeof r.capacity === 'number' ? r.capacity : parseInt(r.capacity?.toString().match(/(\d+)/)?.[1] || '0');
				return getCap(a) - getCap(b);
			});

			if (matchingRooms.length > 0) {
				const best = matchingRooms[0];
				let reply = `üë• ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö <b>${requiredCapacity} ‡∏ó‡πà‡∏≤‡∏ô</b> ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:\n\n`;
				reply += `‚≠ê <b>${best.name}</b> (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö ${best.capacity} ‡∏Ñ‡∏ô)`;
				if (best.equipment || best.description) {
					reply += `\n ${best.equipment || best.description}`;
				}
				if (matchingRooms.length > 1) {
					reply += `\n\nüìå ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ:\n`;
					reply += matchingRooms.slice(1, 4).map((r: any) => `‚Ä¢ ${r.name} (${r.capacity} ‡∏Ñ‡∏ô)`).join('\n');
				}
				reply += '\n\nüí° ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π "‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö';
				return NextResponse.json({ reply });
			} else {
				return NextResponse.json({
					reply: `üòî ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö ${requiredCapacity} ‡∏ó‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ\n\n‡∏•‡∏≠‡∏á‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏£‡∏±‡∏ö`
				});
			}
		}
		if (matchAny(lc, ['‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞', '‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥', '‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö', 'booking status', '‡∏à‡∏≠‡∏á‡πÑ‡∏ß‡πâ', '‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á', '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á'])) {
			return NextResponse.json({
				reply: 'ÔøΩ <b>‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞/‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</b>\n\n' +
					'<b>üìå ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</b>\n' +
					'‚Ä¢ ‡∏Å‡∏î‡∏ó‡∏µ‡πà <b>"‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå"</b> ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô\n' +
					'‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>"‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"</b>\n\n' +
					'<b>üìå ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</b>\n' +
					'‚Ä¢ ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π <b>"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"</b> ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô\n' +
					'‚Ä¢ ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö <b>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</b>'
			});
		}
		if (matchAny(lc, ['‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å', 'cancel', '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á'])) {
			return NextResponse.json({
				reply: '‚ùå <b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</b>\n\n' +
					'1Ô∏è‚É£ ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π <b>"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"</b> ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô\n' +
					'2Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\n' +
					'3Ô∏è‚É£ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <b>"‡∏•‡∏ö"</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"</b>\n\n' +
					'‚ö†Ô∏è ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}
		if (matchAny(lc, ['‡∏à‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á', '‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏≠‡∏á', '‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á', '‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏≠‡∏á', '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', '‡∏à‡∏≠‡∏á‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô', '‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà', '‡∏Å‡∏î‡∏à‡∏≠‡∏á', 'book room', '‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°', '‡∏à‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£'])) {
			return NextResponse.json({
				reply: 'üìã <b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</b>\n\n' +
					'1Ô∏è‚É£ ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π <b>"‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°"</b> ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô\n' +
					'2Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</b> ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£\n' +
					'3Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</b> ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£\n' +
					'4Ô∏è‚É£ ‡∏Å‡∏£‡∏≠‡∏Å <b>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</b> ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°\n' +
					'5Ô∏è‚É£ ‡∏Å‡∏î <b>"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"</b>\n\n' +
					'‚è≥ ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}
		if (matchAny(lc, ['‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á', '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£', '‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á', '‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô', '‡∏ô‡∏≤‡∏ô‡∏™‡∏∏‡∏î', '‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤', '‡∏Å‡∏é', '‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö', '‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î', '‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç'])) {
			return NextResponse.json({
				reply: '‚è∞ <b>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á</b>\n\n' +
					'üïó ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏à‡∏≠‡∏á: <b>08:00 - 17:00 ‡∏ô.</b> (‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå-‡∏®‡∏∏‡∏Å‡∏£‡πå)\n' +
					'üìÖ ‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ\n' +
					'‚è±Ô∏è ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á: ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á\n\n' +
					'üìå <b>‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</b>\n' +
					'‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô\n' +
					'‚Ä¢ ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°\n' +
					'‚Ä¢ ‡∏õ‡∏¥‡∏î‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô\n' +
					'‚Ä¢ ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤'
			});
		}
		if (matchAny(lc, ['‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå', '‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå', 'projector', '‡∏à‡∏≠ tv', '‡πÑ‡∏ß‡∏ó‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î', 'whiteboard', 'wifi', '‡πÑ‡∏°‡∏Ñ‡πå', '‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô', 'mic'])) {
			const rooms = await db`SELECT * FROM rooms`;
			const activeRooms = rooms.filter((r: any) => r.status === 'active' || r.is_active === true || r.is_active === 1);

			let reply = 'üñ•Ô∏è <b>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</b>\n\n';
			activeRooms.forEach((r: any) => {
				reply += `üìå <b>${r.name}</b>\n`;
				reply += `   ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${r.capacity} ‡∏Ñ‡∏ô\n`;
				if (r.equipment || r.description) {
					reply += ` ${r.equipment || r.description}\n`;
				}
				reply += '\n';
			});
			reply += 'üí° ‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏µ Wi-Fi ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏Ñ‡∏£‡∏±‡∏ö';
			return NextResponse.json({ reply });
		}
		if (matchAny(lc, ['‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏Å‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á', '‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á', '‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡πâ‡∏≠‡∏á', '‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡πÉ‡∏´‡∏ç‡πà', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á', '‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£'])) {
			const rooms = await db`SELECT * FROM rooms`;
			const activeRooms = rooms.filter((r: any) => r.status === 'active' || r.is_active === true || r.is_active === 1);

			let reply = `üè¢ <b>‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${activeRooms.length} ‡∏´‡πâ‡∏≠‡∏á)</b>\n\n`;
			activeRooms.forEach((r: any, i: number) => {
				reply += `${i + 1}. <b>${r.name}</b>\n`;
				reply += `   ‚Ä¢ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: ${r.capacity} ‡∏Ñ‡∏ô\n`;
				if (r.room_number) reply += `   ‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á: ${r.room_number}\n`;
				reply += '\n';
			});
			reply += 'üí° ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π "‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏£‡∏±‡∏ö';
			return NextResponse.json({ reply });
		}
		if (matchAny(lc, ['‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å', '‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô', 'register', '‡∏™‡∏°‡∏±‡∏Ñ‡∏£'])) {
			return NextResponse.json({
				reply: 'üìù <b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</b>\n\n' +
					'1Ô∏è‚É£ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <b>"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"</b> ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Login\n' +
					'2Ô∏è‚É£ ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡∏ä‡∏∑‡πà‡∏≠, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô)\n' +
					'3Ô∏è‚É£ ‡∏Å‡∏î <b>"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"</b>\n\n' +
					'‚úÖ ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}

		if (matchAny(lc, ['‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™', '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™', 'password', 'reset password'])) {
			return NextResponse.json({
				reply: 'üîë <b>‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</b>\n\n' +
					'‚Ä¢ <b>‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</b> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö\n' +
					'‚Ä¢ <b>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</b> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π "‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå" ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"\n\n' +
					'üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}

		if (matchAny(lc, ['‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå', 'profile', '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß'])) {
			return NextResponse.json({
				reply: 'üë§ <b>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</b>\n\n' +
					'‚Ä¢ ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π <b>"‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå"</b> ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô\n' +
					'‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏ä‡∏∑‡πà‡∏≠, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‡πÑ‡∏î‡πâ\n' +
					'‚Ä¢ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô'
			});
		}

		if (matchAny(lc, ['‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô', '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô', 'feedback', '‡∏£‡∏µ‡∏ß‡∏¥‡∏ß', 'review', '‡∏™‡πà‡∏á‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡πâ‡∏ô', '‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô', '‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô'])) {
			return NextResponse.json({
				reply: '‚≠ê <b>‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô / Feedback</b>\n\n' +
					'‚Ä¢ ‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á Feedback\n' +
					'‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏≤‡∏ß ‚≠ê ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÑ‡∏î‡πâ\n' +
					'‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö üôè'
			});
		}
		if (matchAny(lc, ['‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤', '‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏õ‡∏±‡∏ç‡∏´‡∏≤', '‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á', '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢', '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠', '‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô', 'admin'])) {
			return NextResponse.json({
				reply: 'üìû <b>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</b>\n\n' +
					'‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:\n\n' +
					'üè´ <b>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏≠‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</b>\n' +
					'üìç ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤\n' +
					'‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£: ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå-‡∏®‡∏∏‡∏Å‡∏£‡πå 08:30-16:30 ‡∏ô.\n\n' +
					'üí° ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Feedback ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}
		if (matchAny(lc, ['‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì', '‡∏Ç‡∏≠‡∏ö‡πÉ‡∏à', 'thanks', 'thank you', 'thx'])) {
			return NextResponse.json({
				reply: '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! üòä ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}

		if (matchAny(lc, ['‡∏ö‡∏≤‡∏¢', 'bye', '‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô', '‡∏•‡∏≤‡∏•‡πà‡∏∞', '‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô', '‡πÑ‡∏ß‡πâ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô'])) {
			return NextResponse.json({
				reply: '‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö! üëã ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö üòä'
			});
		}
		if (matchAny(lc, ['‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏ß‡∏¥‡∏ä‡∏≤'])) {
			return NextResponse.json({
				reply: 'üìö <b>‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</b>\n\n' +
					'‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ö‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏ö‡∏≤‡∏á‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤\n\n' +
					'‚Ä¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ <b>‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏à‡∏≠‡∏á</b> ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô\n' +
					'‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ <b>"‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°"</b> ‡∏Ñ‡∏£‡∏±‡∏ö'
			});
		}

		if (matchAny(lc, ['‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°', 'room'])) {
			return NextResponse.json({
				reply: 'üè¢ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π <b>"‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°"</b> ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô\n\n' +
					'‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°:\n‚Ä¢ "‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏°" - ‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ\n‚Ä¢ "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 20 ‡∏Ñ‡∏ô" - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô\n‚Ä¢ "‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∞‡πÑ‡∏£" - ‡∏î‡∏π‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á'
			});
		}
		return NextResponse.json({
			reply: 'ü§î ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ\n\n' +
				'‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏î‡∏π‡∏Ñ‡∏£‡∏±‡∏ö:\n' +
				'‚Ä¢ "‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏ß‡πà‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏á"\n' +
				'‚Ä¢ "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 20 ‡∏Ñ‡∏ô"\n' +
				'‚Ä¢ "‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á"\n' +
				'‚Ä¢ "‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"\n' +
				'‚Ä¢ "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£"\n' +
				'‚Ä¢ "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á"\n' +
				'‚Ä¢ "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà"'
		});

	} catch (error) {
		console.error('Chatbot API Error:', error);
		return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });
	}
}

export async function GET() {
	return NextResponse.json({ message: 'Please use POST method for chat.' });
}
